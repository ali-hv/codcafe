{% load static %}

<!-- Spinner Start
<div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
    <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
        <span class="sr-only">در حال بارگذاری ...</span>
    </div>
</div>
 Spinner End -->


<!-- Navbar Start -->
<nav class="navbar navbar-expand-lg bg-white navbar-light shadow sticky-top p-0">
  <a href="{% url 'home:home_page' %}">
    <img src="{% static 'img/logo.png' %}" alt="site logo" class="navbar-brand">
  </a>
  <a href="{% url 'home:home_page' %}">
    <p class="navbar-nav ms-auto p-4 p-lg-0 nav-item" style="color: saddlebrown; font-size: 25px;">&nbsp;کافه کد</p>
  </a>
    <button type="button" class="navbar-toggler me-4" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
        <div class="navbar-nav ms-auto p-4 p-lg-0">
            <a href="{% url 'home:home_page' %}" class="nav-item nav-link">خانه</a>
            <a href="{% url 'courses:courses_list' %}" class="nav-item nav-link">دوره ها</a>
            <a href="{% url 'blog:blog_list' %}" class="nav-item nav-link">بلاگ</a>
            <a href="{% url 'home:about_page' %}" class="nav-item nav-link">درباره ما</a>
            <a href="{% url 'home:contact_page' %}" class="nav-item nav-link">تماس با ما</a>
        </div>

        <!-- Search Box Start -->
        <form class="input-group rounded" action="{% url 'courses:search_courses' keyword=q %}" method="get">
          <input type="search" name="q" class="form-control" id="search-input" placeholder="جستجو" aria-label="Search" aria-describedby="search-addon"/>
          <button type="submit" class="input-group-text border-0" id="search-addon">
            <i class="fas fa-search"></i>
          </button>
        </form>
        <!-- Search Box End -->


        <div class="button-group">
            {% if user.is_authenticated %}
              <div class="dropdown">
                {% if user.avatar %}
                    <button class="dropbtn" style="background-image: url({{ user.avatar.url }});"></button>
                {% else %}
                    <button class="dropbtn" style="background-image: url({% static 'img/user-avatar.png' %});"></button>
                {% endif %}
                <div class="dropdown-content">
                  <a href="{% url 'users:user_profile' %}"><i class="bi bi-person" style="margin-left: 8px"></i>پروفایل</a>
                  <a href="{% url 'users:user_courses' %}"><i class="bi bi-folder2" style="margin-left: 8px"></i>دوره های من</a>
                  <a href="{% url 'cart:cart' %}" style="margin-right: -8px;">
                      <span class='badge badge-warning' id='lblCartCount'> {{ user.user_cart.courses.count }} </span>
                      <i class="bi bi-cart" style="margin-left: 8px"></i>
                      سبد خرید</a>
                  <a href="{% url 'accounts:logout' %}" class="logout"><i class="bi bi-door-open" style="margin-left: 8px"></i>خروج</a>
                </div>
              </div>
            {% else %}
              <a href="{% url 'accounts:login' %}"><button class="button login-button">ورود</button></a>
              <a href="{% url 'accounts:register' %}"><button class="button register-button">ثبت نام</button></a>
            {% endif %}
        </div>
    </div>
</nav>
<!-- Navbar End -->